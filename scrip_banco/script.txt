CREATE SCHEMA `banco_pi`;

USE banco_pi;

CREATE TABLE CLIENTE(
	ID INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
    NOME VARCHAR(100) NOT NULL,
    SOBRENOME VARCHAR(100) NOT NULL,
    RG VARCHAR(45) NOT NULL,
    CPF VARCHAR(45) NOT NULL,
    DATA_NASCIMENTO DATE NOT NULL,
    GENERO VARCHAR(10),
    ESTADO_CIVIL VARCHAR(45),
    TELEFONE VARCHAR(45),
    EMAIL VARCHAR(45),
    ATIVO BOOLEAN NOT NULL DEFAULT TRUE
 );   
 
 CREATE TABLE ENDERECO_CLI(
				ID INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
                ID_CLI INT NOT NULL,
                CEP VARCHAR(45),
                LOGRADOURO VARCHAR(100),
                COMPLEMENTO VARCHAR(100),
                BAIRRO VARCHAR(100),
                CIDADE VARCHAR(100),
                UF VARCHAR(4),
                CONSTRAINT fk_idCli FOREIGN KEY(ID_CLI)
                REFERENCES CLIENTE (ID)
);

CREATE TABLE PERFUME(
				ID INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
                NOME VARCHAR(100),
                MARCA VARCHAR(100),
                ML INT NOT NULL,
                QTD_PROD INT NOT NULL,
                PRECO DOUBLE NOT NULL,
                VALIDADE DATE,
                ATIVO BOOLEAN NOT NULL DEFAULT TRUE
);

CREATE TABLE VENDA(
				ID INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
                ID_CLI INT NOT NULL,
                DATA_VENDA DATE,
                CONSTRAINT fk_idcliente FOREIGN KEY(ID_CLI)
                REFERENCES CLIENTE(ID)
);
                
 CREATE TABLE ITENS_VENDA(
				ID INT PRIMARY KEY NOT NULL AUTO_INCREMENT,
                ID_VENDA INT NOT NULL,
                ID_PROD INT NOT NULL,
                QTD_PROD INT NOT NULL,
                CONSTRAINT fk_idVenda FOREIGN KEY(ID_VENDA)
                REFERENCES VENDA(ID),
                CONSTRAINT fk_idProd FOREIGN KEY(ID_PROD)
                REFERENCES PERFUME (ID)
);